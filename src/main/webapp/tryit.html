<!DOCTYPE html>
<html lang="en">
<head>
    <title>I2ME2 core cell tester</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel=stylesheet href="libs/codemirror/lib/codemirror.css">
    <link rel=stylesheet href="libs/codemirror/doc/docs.css">
    <script src="libs/codemirror/lib/codemirror.js"></script>
    <script src="libs/codemirror/mode/xml/xml.js"></script>
    <script src="libs/codemirror/mode/javascript/javascript.js"></script>
    <script src="libs/codemirror/mode/css/css.js"></script>


</head>
<body>

<div class="container">
    <ul class="nav nav-tabs">
        <li class="nav active"><a href="#getMed" data-toggle="tab">Get Medications</a></li>
        <li class="nav"><a href="#putMed" data-toggle="tab">Put Medications</a></li>
        <li class="nav"><a href="#idm" data-toggle="tab">IDM Access</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div class="tab-pane fade in active" id="getMed">
            <form role="form" id="getMedForm" method="post" action="/i2me2/rest/medications/getMedications">
                <div class="form-group">
                    <label>Place valid token:</label>
                    <input class="form-control" name="token" id="token" placeholder="Enter token">
                </div>
                <button type="submit" id="btnGetMed" class="btn btn-default">Submit</button>
            </form>
            <label>Output</label>
            <textarea id=outputPdo></textarea>
        </div>
        <div class="tab-pane fade" id="putMed">
            <form role="form" id="putMedForm" method="post" action="/i2me2/rest/medications/putMedications">
                <div class="form-group">
                    <label>Place valid token:</label>
                    <input class="form-control" name="token" id="tokenPut" placeholder="Enter token">
                    <label>Place json-like string:</label>
                    <input type="text" name="content" id="content">
                </div>
                <button id="btnPutMed" class="btn btn-default">Submit</button>
            </form>
            <textarea id="inputJson" form="putMedForm"></textarea>
        </div>
        <div class="tab-pane fade" id="idm">Content inside tab C</div>
    </div>
</div>
<script>
    $("#getMedForm").submit(function() {
        $.ajax({
            url: $('#getMedForm').attr('action'),
            type: post,
            data: $("#getMedForm").serialize(),
            contents: "application/xml",
            success: function(xmlPdo) {
                alert(xmlPdo);
                $("#outputPdo").val(xmlPdo);
            },
            error: function(a,b,c) {
                alert(b);
            }
        });
        return false;
    });
    var outputPdoMirror = CodeMirror.fromTextArea(document.getElementById("outputPdo"), {
        lineNumbers: true,
        mode: "text/xml"
    });
    var inputJsonMirror = CodeMirror.fromTextArea(document.getElementById("inputJson"), {
        lineNumbers: true,
        mode: "text/json"
    });
</script>

</body>
</html>